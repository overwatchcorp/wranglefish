{"version":3,"sources":["components/Parser.jsx","components/RVector.jsx","components/RMatrix.jsx","reducers/textInput.js","actions/index.js","reducers/parsers.js","reducers/index.js","store/index.js","components/TextInput.jsx","App.jsx","serviceWorker.js","index.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","_RVector__WEBPACK_IMPORTED_MODULE_2__","_RMatrix__WEBPACK_IMPORTED_MODULE_3__","parsedData","ParserComponent","state","parsers","map","parser","name","func","outputType","output","textInput","text","_eval","eval","data","warning","a","createElement","array","matrix","JSON","stringify","key","style","borderBottom","marginBottom","paddingBottom","fontFamily","mapStateToProps","_ref","Parser","connect","RVector","props","v","i","concat","value","defaultProps","RMatrix","ncol","length","vector","arr","arguments","undefined","action","type","Object","assign","indexReducer","combineReducers","store","createStore","applyMiddleware","logger","TextInput","_ref2","dispatch","updateTextInput","event","target","react_default","className","onChange","rows","placeholder","App","es","fontSize","textAlign","components_TextInput","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2d4e654e.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport RVector from './RVector';\nimport RMatrix from './RMatrix';\n\nconst parsedData = {};\n\nconst ParserComponent = state => state.parsers.parsers.map((parser) => {\n  const { name, func, output: outputType } = parser;\n  const { textInput } = state;\n  const { text } = textInput;\n  if (text) {\n    const { data, warning } = eval(func)(text, parsedData);\n    parsedData[name] = data;\n    let output;\n    switch (outputType) {\n      case ('vector'): {\n        output = (\n          <div>\n            {warning}\n            <RVector array={data} name={name} />\n          </div>\n        );\n        break;\n      }\n      case ('matrix'): {\n        output = (\n          <div>\n            <b>{warning}</b>\n            <RMatrix matrix={data} name={name} />\n          </div>\n        );\n        break;\n      }\n      default: {\n        output = <div>{JSON.stringify(data)}</div>;\n      }\n    }\n    return (\n      <div\n        key={name}\n        style={{\n          borderBottom: '1px dashed gray',\n          marginBottom: '1rem',\n          paddingBottom: '1rem',\n        }}\n      >\n        <h6>\n          <span style={{ fontFamily: 'Courier' }}>\n            filter name:&nbsp;\n            { name }\n          </span>\n        </h6>\n        <pre><code>{ func }</code></pre>\n        <h6>\n          <span style={{ fontFamily: 'Courier' }}>output</span>\n        </h6>\n        <code>\n          { output }\n        </code>\n      </div>\n    );\n  } else {\n    return <div><code>{name}</code> waiting for data.</div>;\n  }\n});\n\nParserComponent.propTypes = () => ({\n  parsers: PropTypes.arrayOf({\n    name: PropTypes.func.isRequired,\n    func: PropTypes.string.isRequired,\n  }),\n});\n\nconst mapStateToProps = ({ textInput, parsers }) => ({\n  textInput,\n  parsers,\n});\n\nconst Parser = connect(mapStateToProps)(ParserComponent);\n\nexport default Parser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst RVector = (props) => {\n  const { array, name } = props;\n  return (\n    <code>\n      {name}\n      &nbsp;&lt;=\n      c(\n      {\n        array.map((v, i) => `${JSON.stringify(v.value)} ${(array[i + 1]) ? ', ' : ''}`)\n      }\n      );\n    </code>\n  )\n}\n\nRVector.propTypes = () => ({\n  array: PropTypes.array,\n  name: PropTypes.string,\n});\n\nRVector.defaultProps = () => ({\n  name: 'No name!!!',\n  array: [],\n});\n\nexport default RVector;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// what this component is supposed to produce\n// m <- matrix(c(NA,2,30,6,19,122,0,NA,18,\n// 0,19,85,0,1,NA,3,8,84,0,0,0,NA,267,50,0,\n// 0,0,5,NA,10,1,0,4,4,1,NA), ncol=6)\nconst RMatrix = ({ matrix, name }) => {\n  const ncol = matrix[0].length;\n  let vector = [];\n  matrix.map(arr => (vector = vector.concat(arr)));\n  const output = `${name} <- matrix(c(${vector}), ncol=${ncol})`\n  return (\n    <div>\n      { output }\n    </div>\n  );\n};\n\nRMatrix.propTypes = () => ({\n  matrix: PropTypes.arrayOf(PropTypes.int).isRequired,\n  name: PropTypes.string.isRequired,\n});\n\nexport default RMatrix;\n","import { UPDATE_TEXT_INPUT } from '../actions';\nimport demoData from './demoData';\n\nconst textInput = (state = { text: '' }, action) => {\n  switch (action.type) {\n    case (UPDATE_TEXT_INPUT): {\n      const { text } = action;\n      const newState = Object.assign({}, state, {\n        text,\n      });\n      return newState;\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default textInput;\n","export const UPDATE_TEXT_INPUT = 'UPDATE_TEXT_INPUT';\n\nexport const updateTextInput = text => ({\n  type: UPDATE_TEXT_INPUT,\n  text,\n});\n\nexport const UPDATE_PARSER_ALGORITM = 'UPDATE_PARSER_ALGORITM';\n\nexport const updateParserAlgorithm = algorithm => ({\n  type: UPDATE_PARSER_ALGORITM,\n  algorithm,\n});\n","// import { UPDATE_PARSER_ALGORITHM } from '../actions';\n\nconst parsers = (state = {\n  parsers: [\n    {\n      name: 'metadata',\n      output: 'vector',\n      func: `\n        (textInput) => {\n          const regex = /Answer.([0-9])=(.+)/g;\n          const output = [];\n          do {\n            const data = regex.exec(textInput);\n            if (data) {\n              output.push({\n                question: data[1], \n                value: data[2],\n              });\n            }\n          } while (regex.lastIndex);\n          return { data: output };\n        }\n      `,\n    },\n    {\n      name: 'data',\n      output: 'matrix',\n      func: `\n        (textInput, { metadata }) => {\n          console.log(metadata);\n          const regex = /[0-9]+, ([a-z])\\\\n[0-9]+, ([a-z])\\\\n[0-9]+, ([a-z])/g;\n          let warning = null;\n          const interactions = [];\n          do {\n            const data = regex.exec(textInput);\n            if (data) {\n              interactions.push({\n                fish1: data[1], \n                action: data[2],\n                fish2: data[3],\n              });\n            }\n          } while (regex.lastIndex);\n\n          const getFishKeys = () => {\n            const fish = [];\n            interactions.map(i => {\n              // if fishX isn't in array, push name to array\n              if(fish.indexOf(i.fish1) === -1) fish.push(i.fish1)\n              if(fish.indexOf(i.fish2) === -1) fish.push(i.fish2)\n            });\n            // return alphanetically sorted array of fish\n            return fish.sort();\n          }\n\n          const fish = getFishKeys();\n          // check to see that fish count match matrix dimensions\n          // if a fish doesn't interact with any other fish, the matrix may be too small\n          if (metadata[4]) {\n            if (parseInt(metadata[4].value) != fish.length) warning = \"Warning! The parser did not find a number of fish equal to the number recorded in the metadata. Metadata reported \" + metadata[4].value + \" fish while the parser found \" + fish.length + \" fish.\"\n          }\n\n          const interactionMatrix = fish.map(thisFish => {\n            return fish.map(otherFish => {\n               let totalInteractionsInitiatedByThisFish = 0;\n               interactions.map(i => {\n                 if (i.fish1 === thisFish && i.fish2 === otherFish) {\n                   totalInteractionsInitiatedByThisFish += 1;\n                 }\n               })\n               return totalInteractionsInitiatedByThisFish;\n            })\n          })\n\n          return({ data: interactionMatrix, warning });\n        }\n      `,\n    },\n  ],\n}, action) => {\n  switch (action.type) {\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default parsers;\n","import { combineReducers } from 'redux';\nimport textInput from './textInput';\nimport parsers from './parsers';\n\nconst indexReducer = combineReducers({\n  textInput,\n  parsers,\n});\n\nexport default indexReducer;\n","import { applyMiddleware, createStore } from 'redux';\nimport logger from 'redux-logger';\nimport indexReducer from '../reducers';\n\nconst store = createStore(indexReducer, applyMiddleware(logger));\n\nexport default store;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { updateTextInput as updateTextInputAction } from '../actions';\n\nconst TextInputComponent = ({ textInput, updateTextInput }) => (\n  <div>\n    <div className=\"form-group\">\n      <textarea\n        value={textInput.text}\n        onChange={updateTextInput}\n        rows=\"5\"\n        placeholder=\"Paste data here\"\n        className=\"form-control\"\n      />\n    </div>\n  </div>\n);\n\nTextInputComponent.propTypes = () => ({\n  textInput: {\n    text: PropTypes.string.isRequired,\n  },\n});\n\nconst mapStateToProps = ({ textInput }) => ({\n  textInput,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  updateTextInput: event => dispatch(updateTextInputAction(event.target.value)),\n});\n\nconst TextInput = connect(mapStateToProps, mapDispatchToProps)(TextInputComponent);\n\nexport default TextInput;\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport TextInput from './components/TextInput';\nimport Parser from './components/Parser';\n\nconst App = () => (\n  <Provider store={store}>\n    <div className=\"container mt-2 mb-2\">\n      <h1 style={{ fontSize: '1.5rem', textAlign: 'center' }}>fish data parser</h1>\n      <h6>Input</h6>\n      <TextInput />\n      <h6>Output</h6>\n      <div className=\"card container pt-2 pb-2\">\n        <Parser />\n      </div>\n    </div>\n  </Provider>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}